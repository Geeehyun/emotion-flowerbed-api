### ì¼ê¸° API (Diary)
### Base URL: http://localhost:8080/api
### ğŸ”‘ ì¸ì¦ í•„ìš”: auth.httpì—ì„œ ë¨¼ì € ë¡œê·¸ì¸í•˜ì—¬ accessTokenì„ ë°œê¸‰ë°›ìœ¼ì„¸ìš”

### ========================================
### ì¼ê¸° CRUD
### ========================================

### ì¼ê¸° ì‘ì„±
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-11",
  "content": "ì˜¤ëŠ˜ ì¹œêµ¬ì™€ ë§›ìˆëŠ” ì €ë…ì„ ë¨¹ì—ˆë‹¤. ì˜¤ëœë§Œì— ë§Œë‚˜ì„œ ì •ë§ ì¦ê±°ì› ê³ , ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©´ì„œ ë§ì€ ìœ„ë¡œë¥¼ ë°›ì•˜ë‹¤. í˜ë“  ì¼ì´ ìˆì—ˆì§€ë§Œ ì¹œêµ¬ ë•ë¶„ì— ê¸°ë¶„ì´ ë§ì´ ì¢‹ì•„ì¡Œë‹¤."
}

### ìœ„í—˜ í‚¤ì›Œë“œ í…ŒìŠ¤íŠ¸ìš© ì¼ê¸° ì‘ì„± (ì£¼ì„ í•´ì œí•˜ì—¬ ì‚¬ìš©)
### ìš°ìš¸ í‚¤ì›Œë“œ í…ŒìŠ¤íŠ¸ (CAUTION ì˜ˆìƒ)
# POST http://localhost:8080/api/v1/diaries
# Authorization: Bearer {{accessToken}}
# Content-Type: application/json
#
# {
#   "diaryDate": "2026-01-07",
#   "content": "ì˜¤ëŠ˜ë„ í˜¼ì ë°¥ì„ ë¨¹ì—ˆë‹¤. ìš”ì¦˜ ê³„ì† ì™¸ë¡œì›Œì„œ í˜ë“¤ë‹¤. ì•„ë¬´ë„ ë‚˜ë¥¼ ì´í•´ ëª»í•˜ëŠ” ê²ƒ ê°™ê³  ë¬´ê¸°ë ¥í•´ì§„ë‹¤. ì¹œêµ¬ë“¤ì€ ë‹¤ ë°”ë¹ ì„œ ì—°ë½ë„ ì˜ ì•ˆ ë˜ê³ ."
# }

### ê·¹ë‹¨ì  í‘œí˜„ í…ŒìŠ¤íŠ¸ (DANGER ì˜ˆìƒ)
# POST http://localhost:8080/api/v1/diaries
# Authorization: Bearer {{accessToken}}
# Content-Type: application/json
#
# {
#   "diaryDate": "2026-01-08",
#   "content": "ë„ˆë¬´ í˜ë“¤ë‹¤. ì•„ë¬´ê²ƒë„ í•˜ê¸° ì‹«ê³  ì‚´ê¸° ì‹«ë‹¤. ì§„ì§œ ì£½ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤. ì•„ë¬´ë„ ë‚  ì´í•´ ëª» í•´."
# }

### ë¯¸ë˜ ì¼ê¸° ì‘ì„± ë°©ì§€ í…ŒìŠ¤íŠ¸ (ì—ëŸ¬ ì˜ˆìƒ: INVALID_INPUT)
### ë¯¸ë˜ ë‚ ì§œì˜ ì¼ê¸°ëŠ” ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
# POST http://localhost:8080/api/v1/diaries
# Authorization: Bearer {{accessToken}}
# Content-Type: application/json
#
# {
#   "diaryDate": "2026-12-31",
#   "content": "ë¯¸ë˜ì˜ ì¼ê¸°ì…ë‹ˆë‹¤. ì´ ì¼ê¸°ëŠ” ì‘ì„±ë˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤."
# }

###

### ì¼ê¸° ê°ì • ë¶„ì„ (ì‹¤ì œ - LLM API ì‚¬ìš©)
### í˜„ì¬ ì„¤ì •: OpenAI (gpt-4o-mini)
### llm.provider ì„¤ì •ì— ë”°ë¼ Claude ë˜ëŠ” OpenAI ì‚¬ìš©
### ğŸ“Œ ì‘ë‹µ í•„ë“œ:
### - summary: AIê°€ ìƒì„±í•œ ì¼ê¸° ìš”ì•½
### - coreEmotionCode: í•µì‹¬ ê°ì • ì½”ë“œ
### - emotionReason: í•µì‹¬ ê°ì • ì„ íƒ ì´ìœ 
### - keywords: í•µì‹¬ ê°ì • ê´€ë ¨ í‚¤ì›Œë“œ ë°°ì—´ (ìµœëŒ€ 3ê°œ)
### - emotions: ê°ì • ë¶„í¬ (ë¹„ìœ¨ í¬í•¨)
### - flowerDetail: í•µì‹¬ ê°ì •ì— ë§¤í•‘ëœ ê½ƒ ìƒì„¸ì •ë³´
### - showEmotionControlTip: ê°ì • ì¡°ì ˆ íŒ í‘œì‹œ ì—¬ë¶€ (ì—°ì† 3ì¼ ì´ìƒ ê°™ì€ ì˜ì—­ ì‹œ true)
### - consecutiveSameAreaDays: ì—°ì†ëœ ê°™ì€ ì˜ì—­ ì¼ìˆ˜
### - repeatedEmotionArea: ë°˜ë³µëœ ê°ì • ì˜ì—­ (red/yellow/blue/green)
### - emotionControlTipCode: ê°ì • ì¡°ì ˆ íŒ ì½”ë“œ (RED_3, YELLOW_5 ë“±)
POST http://localhost:8080/api/v1/diaries/243/analyze
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### ì¼ê¸° ê°ì • ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - ëœë¤ ìƒì„±)
POST http://localhost:8080/api/v1/diaries/1/analyze-test
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### ì¼ê¸° ê°ì • ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - íŠ¹ì • ì˜ì—­ ì§€ì •)
### area íŒŒë¼ë¯¸í„°ë¡œ red/yellow/blue/green ì¤‘ í•˜ë‚˜ ì§€ì • ê°€ëŠ¥
### ì—°ì† ê°ì • íŒ í…ŒìŠ¤íŠ¸ ì‹œ ë™ì¼í•œ ì˜ì—­ì˜ ê°ì •ì„ ë°›ê³  ì‹¶ì„ ë•Œ ìœ ìš©
POST http://localhost:8080/api/v1/diaries/1/analyze-test?area=red
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### ì¼ê¸° ìƒì„¸ ì¡°íšŒ
GET http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}

### íŠ¹ì • ë‚ ì§œ ì¼ê¸° ì¡°íšŒ
GET http://localhost:8080/api/v1/diaries/date/2025-12-09
Authorization: Bearer {{accessToken}}

### ì›”ë³„ ì¼ê¸° ëª©ë¡ ì¡°íšŒ (ê½ƒ ìƒì„¸ì •ë³´ í¬í•¨)
GET http://localhost:8080/api/v1/diaries?yearMonth=2025-12
Authorization: Bearer {{accessToken}}

### ì¼ê¸° ìˆ˜ì •
# TODO ìˆ˜ì •ë˜ë©´ ê¸°ì¡´ ë¶„ì„ ë‚´ìš© ë‚ ë ¤ì•¼í• ë“¯
PUT http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "ì˜¤ëŠ˜ ì¹œêµ¬ì™€ ë§›ìˆëŠ” ì €ë…ì„ ë¨¹ì—ˆë‹¤. ì •ë§ í–‰ë³µí•œ í•˜ë£¨ì˜€ë‹¤. (ìˆ˜ì •ë¨)"
}

### ì¼ê¸° ì‚­ì œ (Soft Delete)
# TODO responseê°€ ì—†ë‹¤? ì›ë˜ RESTfulì€ ê·¸ëŸ°ê²ƒì¸ê°€?
DELETE http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}


### ========================================
### ê°ì • ì¡°ì ˆ íŒ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
### ========================================
### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
### 1. ì—°ì† 3ì¼ ì¼ê¸° ì‘ì„± (ê°™ì€ area, ë‚ ì§œëŠ” ì—°ì†ì´ë©´ ë¨)
### 2. ê° ì¼ê¸°ë¥¼ ë¶„ì„í•˜ì—¬ ì—°ì† ì²´í¬ (area=red íŒŒë¼ë¯¸í„° ì‚¬ìš©)
### 3. 3ì¼ì§¸ ì¼ê¸° ë¶„ì„ ì‹œ showEmotionControlTip=true í™•ì¸
### 4. emotionControlTipCodeë¡œ ê°ì • ì¡°ì ˆ íŒ ë©”ì‹œì§€ ì¡°íšŒ
###
### ğŸ¯ íŠ¹ì§•:
### - ê³¼ê±°/ë¯¸ë˜ ì–´ë–¤ ë‚ ì§œë“  ì—°ì† íŒ¨í„´ë§Œ ë§ìœ¼ë©´ íŒ í‘œì‹œ
### - ë©°ì¹ ì¹˜ ëª¨ì•„ì„œ ì‘ì„±í•´ë„ íŒ¨í„´ ì¸ì‹ ê°€ëŠ¥
### - ì˜ˆìƒ ê²°ê³¼:
###   - 3~4ì¼ ì—°ì† ê°™ì€ ì˜ì—­ â†’ emotionControlTipCode: "RED_3", "YELLOW_3" ë“±
###   - 5ì¼ ì´ìƒ ì—°ì† ê°™ì€ ì˜ì—­ â†’ emotionControlTipCode: "RED_5", "YELLOW_5" ë“±
### - emotionControlTipCodeë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ì—¬ ê°ì • ì¡°ì ˆ íŒ ì¡°íšŒ ê°€ëŠ¥
###   ì˜ˆ: GET /v1/codes/EMOTION_CONTROL/RED_3

### 1ì¼ì°¨: ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (red ì˜ì—­)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-05",
  "content": "ì˜¤ëŠ˜ì€ ì •ë§ í™”ê°€ ë‚¬ë‹¤. ëª¨ë“  ê²ƒì´ ëœ»ëŒ€ë¡œ ë˜ì§€ ì•Šì•„ì„œ ë„ˆë¬´ ë‹µë‹µí•˜ê³  ì§œì¦ì´ ë‚œë‹¤."
}

### 1ì¼ì°¨ ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - red ì˜ì—­ ì§€ì •)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
POST http://localhost:8080/api/v1/diaries/148/analyze-test?area=red
Authorization: Bearer {{accessToken}}

### 2ì¼ì°¨: ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (red ì˜ì—­)
# POST http://localhost:8080/api/v1/diaries
# Authorization: Bearer {{accessToken}}
# Content-Type: application/json
#
# {
#   "diaryDate": "2026-01-06",
#   "content": "ì–´ì œì— ì´ì–´ ì˜¤ëŠ˜ë„ ê¸°ë¶„ì´ ì•ˆ ì¢‹ë‹¤. ê³„ì† í™”ê°€ ë‚˜ê³  ëª¨ë“  ê²Œ ì‹«ë‹¤."
# }
#
# ### 2ì¼ì°¨ ë¶„ì„ - âš ï¸ diaryId ë³€ê²½ í•„ìš”
# POST http://localhost:8080/api/v1/diaries/XXX/analyze-test?area=red
# Authorization: Bearer {{accessToken}}

### 3ì¼ì°¨: ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (red ì˜ì—­)
### âœ… ì´ ì¼ê¸° ë¶„ì„ ì‹œ ê°ì • ì¡°ì ˆ íŒì´ í‘œì‹œë˜ì–´ì•¼ í•¨
# POST http://localhost:8080/api/v1/diaries
# Authorization: Bearer {{accessToken}}
# Content-Type: application/json
#
# {
#   "diaryDate": "2026-01-07",
#   "content": "3ì¼ì§¸ ê³„ì† í™”ê°€ ë‚œë‹¤. ì´ ê°ì •ì„ ì–´ë–»ê²Œ ë‹¤ìŠ¤ë ¤ì•¼ í• ì§€ ëª¨ë¥´ê² ë‹¤."
# }
#
# ### 3ì¼ì°¨ ë¶„ì„ - âš ï¸ diaryId ë³€ê²½ í•„ìš”
# ### âœ… ì˜ˆìƒ ê²°ê³¼:
# ### - showEmotionControlTip: true
# ### - consecutiveSameAreaDays: 3
# ### - repeatedEmotionArea: "red"
# ### - emotionControlTipCode: "RED_3"
# POST http://localhost:8080/api/v1/diaries/XXX/analyze-test?area=red
# Authorization: Bearer {{accessToken}}

### ê°ì • ì¡°ì ˆ íŒ ì½”ë“œ ì¡°íšŒ
### Responseì—ì„œ ë°›ì€ emotionControlTipCodeë¥¼ ë°”ë¡œ ì‚¬ìš©
# GET http://localhost:8080/api/v1/codes/EMOTION_CONTROL/RED_3
# Authorization: Bearer {{accessToken}}


### ========================================
### ìœ„í—˜ë„ ë¶„ì„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (ìµœì‹  ì¼ê¸°ë§Œ ë¶„ì„)
### ========================================
### ğŸ¯ í…ŒìŠ¤íŠ¸ ëª©ì :
### - ê³¼ê±° ì¼ê¸°ë¥¼ ì‘ì„±í•´ë„ ìœ„í—˜ë„ ë¶„ì„ì´ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
### - ìµœì‹  ì¼ê¸°ì¼ ê²½ìš°ì—ë§Œ ìœ„í—˜ë„ ë¶„ì„ì´ ìˆ˜í–‰ë˜ëŠ”ì§€ í™•ì¸
### - ìœ„í—˜ë„ ë¶„ì„ ê¸°ì¤€ ì¼ê¸° ì •ë³´ê°€ users í…Œì´ë¸”ì— ì €ì¥ë˜ëŠ”ì§€ í™•ì¸
###
### ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
### 1. 2026-01-10 ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (ìµœì‹  ì¼ê¸°) â†’ ìœ„í—˜ë„ ë¶„ì„ ìˆ˜í–‰ë¨
###    - users.risk_target_diary_date = 2026-01-10
###    - users.risk_target_diary_sn = ìƒì„±ëœ diary_id
### 2. 2026-01-08 ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (ê³¼ê±° ì¼ê¸°) â†’ ìœ„í—˜ë„ ë¶„ì„ ê±´ë„ˆëœ€
###    - users.risk_target_diary_dateëŠ” 2026-01-10ìœ¼ë¡œ ìœ ì§€
### 3. 2026-01-12 ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (ìµœì‹  ì¼ê¸°) â†’ ìœ„í—˜ë„ ë¶„ì„ ìˆ˜í–‰ë¨
###    - users.risk_target_diary_date = 2026-01-12ë¡œ ì—…ë°ì´íŠ¸
###
### âœ… ê²€ì¦ ë°©ë²•:
### - ë¶„ì„ ë¡œê·¸ì—ì„œ "ê³¼ê±° ì¼ê¸°ì´ë¯€ë¡œ ìœ„í—˜ë„ ë¶„ì„ ìƒëµ" ë©”ì‹œì§€ í™•ì¸
### - DBì—ì„œ users.risk_target_diary_date, risk_target_diary_sn ê°’ í™•ì¸
### - student_risk_history í…Œì´ë¸”ì— target_diary_date, target_diary_sn ì €ì¥ í™•ì¸

### 1ë‹¨ê³„: ìµœì‹  ì¼ê¸° ì‘ì„± (2026-01-10)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-10-17",
  "content": "ì˜¤ëŠ˜ì€ ì¹œêµ¬ì™€ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ëƒˆë‹¤. ê¸°ë¶„ì´ ì¢‹ì•˜ê³  í–‰ë³µí–ˆë‹¤."
}

### 1ë‹¨ê³„: ìµœì‹  ì¼ê¸° ë¶„ì„ (ìœ„í—˜ë„ ë¶„ì„ ìˆ˜í–‰ë¨)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
### ì˜ˆìƒ ê²°ê³¼: ìœ„í—˜ë„ ë¶„ì„ ìˆ˜í–‰, users.risk_target_diary_date = 2026-01-10
POST http://localhost:8080/api/v1/diaries/XXX/analyze-test?area=yellow
Authorization: Bearer {{accessToken}}

###

### 2ë‹¨ê³„: ê³¼ê±° ì¼ê¸° ì‘ì„± (2026-01-08)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2025-10-15",
  "content": "ì´í‹€ ì „ ì¼ê¸°ë¥¼ ë’¤ëŠ¦ê²Œ ì‘ì„±í•œë‹¤. ê·¸ë‚ ì€ í‰ë²”í•œ í•˜ë£¨ì˜€ë‹¤."
}

### 2ë‹¨ê³„: ê³¼ê±° ì¼ê¸° ë¶„ì„ (ìœ„í—˜ë„ ë¶„ì„ ê±´ë„ˆëœ€)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
### ì˜ˆìƒ ê²°ê³¼:
### - ë¡œê·¸ì— "ê³¼ê±° ì¼ê¸°ì´ë¯€ë¡œ ìœ„í—˜ë„ ë¶„ì„ ìƒëµ" ë©”ì‹œì§€
### - users.risk_target_diary_dateëŠ” 2026-01-10ìœ¼ë¡œ ìœ ì§€
### - LLM í”„ë¡¬í”„íŠ¸ì— ìœ„í—˜ë„ ë¶„ì„ ì„¹ì…˜ ì œì™¸ (í† í° ì ˆì•½)
POST http://localhost:8080/api/v1/diaries/247/analyze
Authorization: Bearer {{accessToken}}

###

### 3ë‹¨ê³„: ìƒˆë¡œìš´ ìµœì‹  ì¼ê¸° ì‘ì„± (2026-01-12)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-12",
  "content": "ì˜¤ëŠ˜ ì‹œí—˜ì—ì„œ ì¢‹ì€ ê²°ê³¼ë¥¼ ë°›ì•˜ë‹¤. ì •ë§ ê¸°ì˜ê³  ë¿Œë“¯í•˜ë‹¤!"
}

### 3ë‹¨ê³„: ìƒˆë¡œìš´ ìµœì‹  ì¼ê¸° ë¶„ì„ (ìœ„í—˜ë„ ë¶„ì„ ìˆ˜í–‰ë¨)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
### ì˜ˆìƒ ê²°ê³¼:
### - ìœ„í—˜ë„ ë¶„ì„ ìˆ˜í–‰ë¨
### - users.risk_target_diary_date = 2026-01-12ë¡œ ì—…ë°ì´íŠ¸
### - users.risk_target_diary_sn = ìƒˆë¡œìš´ diary_idë¡œ ì—…ë°ì´íŠ¸
POST http://localhost:8080/api/v1/diaries/248/analyze
Authorization: Bearer {{accessToken}}

###

### 4ë‹¨ê³„: ìœ„í—˜ í‚¤ì›Œë“œê°€ í¬í•¨ëœ ìµœì‹  ì¼ê¸° ì‘ì„± (ìœ„í—˜ë„ ë¶„ì„ í…ŒìŠ¤íŠ¸)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-13",
  "content": "ì˜¤ëŠ˜ í•˜ë£¨ì¢…ì¼ í˜¼ì ìˆì—ˆë‹¤. ì™¸ë¡œì›Œì„œ í˜ë“¤ê³ , ì•„ë¬´ë„ ë‚˜ë¥¼ ì´í•´ ëª»í•˜ëŠ” ê²ƒ ê°™ë‹¤. ë¬´ê¸°ë ¥í•˜ê³  ì§€ì³¤ë‹¤."
}

### 4ë‹¨ê³„: ìœ„í—˜ í‚¤ì›Œë“œ ì¼ê¸° ë¶„ì„ (ì‹¤ì œ LLM ì‚¬ìš©)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
### ì˜ˆìƒ ê²°ê³¼:
### - LLMì´ ìœ„í—˜ í‚¤ì›Œë“œ íƒì§€ (í˜¼ì, ì™¸ë¡œì›Œ, ë¬´ê¸°ë ¥, ì§€ì³¤)
### - users.risk_level = "CAUTION"ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
### - student_risk_historyì— ì´ë ¥ ê¸°ë¡
### - target_diary_date, target_diary_sn ì €ì¥ í™•ì¸
POST http://localhost:8080/api/v1/diaries/XXX/analyze
Authorization: Bearer {{accessToken}}

###

### ğŸ“Š DB í™•ì¸ ì¿¼ë¦¬ (ì°¸ê³ ìš©)
### SELECT user_sn, user_id, risk_level, risk_target_diary_date, risk_target_diary_sn,
###        risk_last_checked_date, risk_continuous_area, risk_continuous_days, risk_reason
### FROM users
### WHERE user_type_cd = 'STUDENT';
###
### SELECT history_id, user_sn, previous_level, new_level, risk_type,
###        target_diary_date, target_diary_sn, risk_reason, created_at
### FROM student_risk_history
### ORDER BY created_at DESC
### LIMIT 10;

###
