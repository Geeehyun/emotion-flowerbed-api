### Emotion Flowerbed API Test
### Base URL: http://localhost:8080/api

### ========================================
### ì¸ì¦ API (Auth)
### ========================================

### ë¡œê·¸ì¸
POST http://localhost:8080/api/v1/auth/login
Content-Type: application/json

{
  "userId": "student2",
  "password": "1234"
}

> {%
    client.test('ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸', () => {
        if(response.status === 200) {
            client.global.set('accessToken', response.body.accessToken);
            client.global.set('refreshToken', response.body.refreshToken);
            client.log(`ì¸ì¦ ì„±ê³µ : ${response.body.accessToken} / ${response.body.refreshToken}`);
            client.assert(true);
        } else {
            client.log('ì¸ì¦ ì‹¤íŒ¨');
            client.assert(false);
            client.exit();
        }
    })
%}

### ë¡œê·¸ì•„ì›ƒ (ì¸ì¦ í•„ìš”)
# @name logout
POST http://localhost:8080/api/v1/auth/logout
Authorization: Bearer {{accessToken}}

### Access Token ê°±ì‹  (Refresh Token Rotation)
### !! ì¤‘ìš”: RefreshTokenë„ í•¨ê»˜ ì¬ë°œê¸‰ë©ë‹ˆë‹¤ (ë³´ì•ˆ ê°•í™”)
### ê¸°ì¡´ RefreshTokenì€ ì‚¬ìš© í›„ ë¬´íš¨í™”ë˜ë¯€ë¡œ ìƒˆë¡œ ë°œê¸‰ëœ RefreshTokenì„ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤
POST http://localhost:8080/api/v1/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

> {%
    client.test('í† í° ê°±ì‹  í…ŒìŠ¤íŠ¸', () => {
        if(response.status === 200) {
            client.global.set('accessToken', response.body.accessToken);
            client.global.set('refreshToken', response.body.refreshToken);
            client.log(`í† í° ê°±ì‹  ì„±ê³µ (Refresh Token Rotation)`);
            client.log(`ìƒˆë¡œìš´ AccessToken: ${response.body.accessToken}`);
            client.log(`ìƒˆë¡œìš´ RefreshToken: ${response.body.refreshToken}`);
            client.assert(true);
        } else {
            client.log('í† í° ê°±ì‹  ì‹¤íŒ¨');
            client.assert(false);
        }
    })
%}

### ========================================
### ì¼ê¸° API (Diary)
### ========================================

### ì¼ê¸° ì‘ì„±
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2025-12-09",
  "content": "ì˜¤ëŠ˜ ì¹œêµ¬ì™€ ë§›ìˆëŠ” ì €ë…ì„ ë¨¹ì—ˆë‹¤. ì˜¤ëœë§Œì— ë§Œë‚˜ì„œ ì •ë§ ì¦ê±°ì› ê³ , ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©´ì„œ ë§ì€ ìœ„ë¡œë¥¼ ë°›ì•˜ë‹¤. í˜ë“  ì¼ì´ ìˆì—ˆì§€ë§Œ ì¹œêµ¬ ë•ë¶„ì— ê¸°ë¶„ì´ ë§ì´ ì¢‹ì•„ì¡Œë‹¤."
}

### ì¼ê¸° ê°ì • ë¶„ì„ (ì‹¤ì œ - Claude API ì‚¬ìš©)
POST http://localhost:8080/api/v1/diaries/1/analyze
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### ì¼ê¸° ê°ì • ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - ëœë¤ ìƒì„±)
POST http://localhost:8080/api/v1/diaries/1/analyze-test
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### ì¼ê¸° ê°ì • ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - íŠ¹ì • ì˜ì—­ ì§€ì •)
### area íŒŒë¼ë¯¸í„°ë¡œ red/yellow/blue/green ì¤‘ í•˜ë‚˜ ì§€ì • ê°€ëŠ¥
### ì—°ì† ê°ì • íŒ í…ŒìŠ¤íŠ¸ ì‹œ ë™ì¼í•œ ì˜ì—­ì˜ ê°ì •ì„ ë°›ê³  ì‹¶ì„ ë•Œ ìœ ìš©
POST http://localhost:8080/api/v1/diaries/1/analyze-test?area=red
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### ì¼ê¸° ìƒì„¸ ì¡°íšŒ
GET http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}

### íŠ¹ì • ë‚ ì§œ ì¼ê¸° ì¡°íšŒ
GET http://localhost:8080/api/v1/diaries/date/2025-12-09
Authorization: Bearer {{accessToken}}

### ì›”ë³„ ì¼ê¸° ëª©ë¡ ì¡°íšŒ (ê½ƒ ìƒì„¸ì •ë³´ í¬í•¨)
GET http://localhost:8080/api/v1/diaries?yearMonth=2025-12
Authorization: Bearer {{accessToken}}

### ì¼ê¸° ìˆ˜ì •
# TODO ìˆ˜ì •ë˜ë©´ ê¸°ì¡´ ë¶„ì„ ë‚´ìš© ë‚ ë ¤ì•¼í• ë“¯
PUT http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "ì˜¤ëŠ˜ ì¹œêµ¬ì™€ ë§›ìˆëŠ” ì €ë…ì„ ë¨¹ì—ˆë‹¤. ì •ë§ í–‰ë³µí•œ í•˜ë£¨ì˜€ë‹¤. (ìˆ˜ì •ë¨)"
}

### ì¼ê¸° ì‚­ì œ (Soft Delete)
# TODO responseê°€ ì—†ë‹¤? ì›ë˜ RESTfulì€ ê·¸ëŸ°ê²ƒì¸ê°€?
DELETE http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}


### ========================================
### ê½ƒ ì •ë³´ API (Flower)
### ========================================

### ì‚¬ìš©ìì˜ ê°ì •&ê½ƒ í†µê³„ ì¡°íšŒ (ë‚ ì§œ ëª©ë¡ + ê½ƒ ìƒì„¸ì •ë³´ í¬í•¨)
GET http://localhost:8080/api/v1/flowers/my-emotions
Authorization: Bearer {{accessToken}}

### ì „ì²´ ê°ì •-ê½ƒ ì •ë³´ ì¡°íšŒ (display_order ìˆœ)
GET http://localhost:8080/api/v1/flowers/all-emotions
Authorization: Bearer {{accessToken}}


### ========================================
### ì„ ìƒë‹˜ API (Teacher)
### ========================================

### ë‚´ í•™ìƒ ëª©ë¡ ì¡°íšŒ
### ì„ ìƒë‹˜ì´ ë‹´ë‹¹í•˜ëŠ” ë°˜ì˜ í•™ìƒ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤
### - ê°™ì€ school_code, class_codeì˜ STUDENT íƒ€ì… íšŒì› ì¡°íšŒ
### - ì´ë¦„ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
### âš ï¸ TEACHER íƒ€ì… ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•„ìš”
GET http://localhost:8080/api/v1/teachers/students
Authorization: Bearer {{accessToken}}


### ========================================
### ê³µí†µ ì½”ë“œ API (Code)
### ========================================

### ëª¨ë“  ì½”ë“œ ê·¸ë£¹ ì¡°íšŒ (ì½”ë“œ í¬í•¨)
GET http://localhost:8080/api/v1/codes/groups
Authorization: Bearer {{accessToken}}

### íŠ¹ì • ì½”ë“œ ê·¸ë£¹ ì¡°íšŒ (USER_TYPE)
GET http://localhost:8080/api/v1/codes/groups/USER_TYPE
Authorization: Bearer {{accessToken}}

### íŠ¹ì • ì½”ë“œ ê·¸ë£¹ ì¡°íšŒ (EMOTION_CONTROL)
GET http://localhost:8080/api/v1/codes/groups/EMOTION_CONTROL
Authorization: Bearer {{accessToken}}

### USER_TYPE ì½”ë“œ ëª©ë¡ ì¡°íšŒ
GET http://localhost:8080/api/v1/codes/USER_TYPE
Authorization: Bearer {{accessToken}}

### EMOTION_CONTROL ì½”ë“œ ëª©ë¡ ì¡°íšŒ
GET http://localhost:8080/api/v1/codes/EMOTION_CONTROL
Authorization: Bearer {{accessToken}}

### íŠ¹ì • ì½”ë“œ ì¡°íšŒ (USER_TYPE/STUDENT)
GET http://localhost:8080/api/v1/codes/USER_TYPE/STUDENT
Authorization: Bearer {{accessToken}}

### ì‚¬ìš©ì ìœ í˜• ì½”ë“œ ëª©ë¡ (ë‹¨ì¶• URL)
GET http://localhost:8080/api/v1/codes/user-types
Authorization: Bearer {{accessToken}}

### ê°ì • ì œì–´ í™œë™ ì½”ë“œ ëª©ë¡ (ë‹¨ì¶• URL)
GET http://localhost:8080/api/v1/codes/emotion-controls
Authorization: Bearer {{accessToken}}


### ========================================
### ê°ì • ì¡°ì ˆ íŒ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
### ========================================
### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
### 1. ì—°ì† 3ì¼ ì¼ê¸° ì‘ì„± (ê°™ì€ area, ë‚ ì§œëŠ” ì—°ì†ì´ë©´ ë¨)
### 2. ê° ì¼ê¸°ë¥¼ ë¶„ì„í•˜ì—¬ ì—°ì† ì²´í¬ (area=red íŒŒë¼ë¯¸í„° ì‚¬ìš©)
### 3. 3ì¼ì§¸ ì¼ê¸° ë¶„ì„ ì‹œ showEmotionControlTip=true í™•ì¸
### 4. ê°ì • ì¡°ì ˆ íŒ ì½”ë“œ ì¡°íšŒí•˜ì—¬ ì ì ˆí•œ ë©”ì‹œì§€ í™•ì¸
###
### ğŸ¯ ê°œì„ : ì˜¤ëŠ˜ ë‚ ì§œ ì²´í¬ ì œê±°ë¨
### - ê³¼ê±°/ë¯¸ë˜ ì–´ë–¤ ë‚ ì§œë“  ì—°ì† íŒ¨í„´ë§Œ ë§ìœ¼ë©´ íŒ í‘œì‹œ
### - ë©°ì¹ ì¹˜ ëª¨ì•„ì„œ ì‘ì„±í•´ë„ íŒ¨í„´ ì¸ì‹ ê°€ëŠ¥

### 1ë‹¨ê³„: ì˜¤ëŠ˜-2ì¼ ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (ì˜ˆ: 2025-12-24)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-05",
  "content": "ì˜¤ëŠ˜ì€ ì •ë§ í™”ê°€ ë‚¬ë‹¤. ëª¨ë“  ê²ƒì´ ëœ»ëŒ€ë¡œ ë˜ì§€ ì•Šì•„ì„œ ë„ˆë¬´ ë‹µë‹µí•˜ê³  ì§œì¦ì´ ë‚œë‹¤."
}

### ì˜¤ëŠ˜-2ì¼ ì¼ê¸° ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - red ì˜ì—­ ì§€ì •)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
### area=red íŒŒë¼ë¯¸í„°ë¡œ red ì˜ì—­ì˜ ê°ì •ë§Œ ëœë¤ ì„ íƒ
POST http://localhost:8080/api/v1/diaries/148/analyze-test?area=red
Authorization: Bearer {{accessToken}}

### 2ë‹¨ê³„: ì˜¤ëŠ˜-1ì¼ ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (ì˜ˆ: 2025-12-25)
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-02",
  "content": "ì–´ì œì— ì´ì–´ ì˜¤ëŠ˜ë„ ê¸°ë¶„ì´ ì•ˆ ì¢‹ë‹¤. ê³„ì† í™”ê°€ ë‚˜ê³  ëª¨ë“  ê²Œ ì‹«ë‹¤."
}

### ì˜¤ëŠ˜-1ì¼ ì¼ê¸° ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - red ì˜ì—­ ì§€ì •)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
POST http://localhost:8080/api/v1/diaries/133/analyze-test?area=red
Authorization: Bearer {{accessToken}}

### 3ë‹¨ê³„: ì˜¤ëŠ˜ ì¼ê¸° ì‘ì„± ë° ë¶„ì„ (ì˜ˆ: 2025-12-26)
### ğŸ¯ ì´ ì¼ê¸° ë¶„ì„ ì‹œ ê°ì • ì¡°ì ˆ íŒì´ í‘œì‹œë˜ì–´ì•¼ í•¨
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2026-01-03",
  "content": "3ì¼ì§¸ ê³„ì† í™”ê°€ ë‚œë‹¤. ì´ ê°ì •ì„ ì–´ë–»ê²Œ ë‹¤ìŠ¤ë ¤ì•¼ í• ì§€ ëª¨ë¥´ê² ë‹¤."
}

### ì˜¤ëŠ˜ ì¼ê¸° ë¶„ì„ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ - red ì˜ì—­ ì§€ì •)
### âœ… ì˜ˆìƒ ê²°ê³¼:
### - showEmotionControlTip: true
### - consecutiveSameAreaDays: 3 (ì‹¤ì œ ì—°ì† ì¼ìˆ˜, 3ì¼/4ì¼/5ì¼/6ì¼... ë“±)
### - repeatedEmotionArea: "red" (ë˜ëŠ” ì—°ì†ëœ area)
### - emotionControlTipCode: "RED_3" (3~4ì¼ ì—°ì† ì‹œ) ë˜ëŠ” "RED_5" (5ì¼ ì´ìƒ ì—°ì† ì‹œ)
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
POST http://localhost:8080/api/v1/diaries/134/analyze-test?area=red
Authorization: Bearer {{accessToken}}

### 4ë‹¨ê³„: ê°ì • ì¡°ì ˆ íŒ ì½”ë“œ ì¡°íšŒ
### ğŸ¯ Responseì—ì„œ ë°›ì€ emotionControlTipCodeë¥¼ ë°”ë¡œ ì‚¬ìš©!
### - emotionControlTipCode: "RED_3" â†’ GET /codes/EMOTION_CONTROL/RED_3
### - emotionControlTipCode: "YELLOW_5" â†’ GET /codes/EMOTION_CONTROL/YELLOW_5
### í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë³„ë„ë¡œ ì½”ë“œë¥¼ ì¡°í•©í•  í•„ìš” ì—†ì´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
GET http://localhost:8080/api/v1/codes/EMOTION_CONTROL
Authorization: Bearer {{accessToken}}

### íŠ¹ì • ê°ì • ì¡°ì ˆ íŒ ì½”ë“œ ì¡°íšŒ ì˜ˆì‹œ (Red ì˜ì—­ 3ì¼ ì—°ì†)
### emotionControlTipCode ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
GET http://localhost:8080/api/v1/codes/EMOTION_CONTROL/RED_3
Authorization: Bearer {{accessToken}}

### 5ë‹¨ê³„: ì—°ì†ì´ ëŠê¸´ ê²½ìš° í…ŒìŠ¤íŠ¸
### ë‹¤ë¥¸ areaì˜ ì¼ê¸°ë¥¼ ì‘ì„±í•˜ë©´ ì—°ì†ì´ ëŠê¹€
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2025-12-27",
  "content": "ì˜¤ëŠ˜ì€ ê¸°ë¶„ì´ ì¢‹ë‹¤. ì¹œêµ¬ë“¤ê³¼ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ëƒˆë‹¤."
}

### ì—°ì†ì´ ëŠê¸´ ì¼ê¸° ë¶„ì„
### âœ… ì˜ˆìƒ ê²°ê³¼:
### - showEmotionControlTip: false
### - consecutiveSameAreaDays: null
### - repeatedEmotionArea: null
### âš ï¸ diaryIdë¥¼ ì‹¤ì œ ìƒì„±ëœ IDë¡œ ë³€ê²½ í•„ìš”
POST http://localhost:8080/api/v1/diaries/104/analyze-test
Authorization: Bearer {{accessToken}}

###
### ğŸ“Œ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:
### âœ… 3ì¼ ì—°ì† ê°™ì€ area â†’ showEmotionControlTip: true, consecutiveSameAreaDays: 3, emotionControlTipCode: "RED_3"
### âœ… 4ì¼ ì—°ì† ê°™ì€ area â†’ showEmotionControlTip: true, consecutiveSameAreaDays: 4, emotionControlTipCode: "RED_3"
### âœ… 5ì¼ ì—°ì† ê°™ì€ area â†’ showEmotionControlTip: true, consecutiveSameAreaDays: 5, emotionControlTipCode: "RED_5"
### âœ… ì‹¤ì œ ì—°ì† ì¼ìˆ˜ë¥¼ ì •í™•íˆ ë°˜í™˜ (3, 4, 5, 6, 7... ë“±)
### âœ… emotionControlTipCodeë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ì—¬ ê°ì • ì¡°ì ˆ íŒ ì¡°íšŒ ê°€ëŠ¥
### âœ… ì—°ì†ì´ ëŠê¸´ ê²½ìš° â†’ showEmotionControlTip: false
### âœ… ê³¼ê±° ì¼ê¸°ë„ íŒ í‘œì‹œ (ë‚ ì§œ ë¬´ê´€, ì—°ì† íŒ¨í„´ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨)
### âœ… ê°ì • ì¡°ì ˆ íŒ ì½”ë“œ ì¡°íšŒ â†’ code_nameì— ì ì ˆí•œ ë©”ì‹œì§€ í™•ì¸
###
### ğŸ¯ ê°œì„  ì‚¬í•­:
### - ì˜¤ëŠ˜ ë‚ ì§œ ì²´í¬ ì œê±°: ì–¸ì œ ì¼ê¸°ë¥¼ ì“°ë“  ì—°ì† íŒ¨í„´ ì¸ì‹
### - ë©°ì¹ ì¹˜ ëª¨ì•„ì„œ ì‘ì„±í•´ë„ íŒ¨í„´ ì¸ì‹ ê°€ëŠ¥
### - ê³¼ê±° ì¼ê¸° ì‘ì„± ì‹œì—ë„ "ê·¸ë•Œ ì´ëŸ° íŒ¨í„´ì´ì—ˆêµ¬ë‚˜" ì¸ì‹ ê°€ëŠ¥
### - consecutiveSameAreaDaysì— ì‹¤ì œ ì—°ì† ì¼ìˆ˜ ì •í™•íˆ ë°˜í™˜ (3, 4, 5, 6, 7... ë“±)
### - emotionControlTipCode ì¶”ê°€: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œ ì œê³µ (RED_3, YELLOW_5 ë“±)
###