### Emotion Flowerbed API Test
### Base URL: http://localhost:8080/api

### ========================================
### 인증 API (Auth)
### ========================================

### 로그인
POST http://localhost:8080/api/v1/auth/login
Content-Type: application/json

{
  "userId": "student1",
  "password": "1234"
}

> {%
    client.test('로그인 테스트', () => {
        if(response.status === 200) {
            client.global.set('accessToken', response.body.accessToken);
            client.global.set('refreshToken', response.body.refreshToken);
            client.log(`인증 성공 : ${response.body.accessToken} / ${response.body.refreshToken}`);
            client.assert(true);
        } else {
            client.log('인증 실패');
            client.assert(false);
            client.exit();
        }
    })
%}

### 로그아웃 (인증 필요)
# @name logout
POST http://localhost:8080/api/v1/auth/logout
Authorization: Bearer {{accessToken}}

### Access Token 갱신
POST http://localhost:8080/api/v1/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### ========================================
### 일기 API (Diary)
### ========================================

### 일기 작성
POST http://localhost:8080/api/v1/diaries
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "diaryDate": "2025-12-09",
  "content": "오늘 친구와 맛있는 저녁을 먹었다. 오랜만에 만나서 정말 즐거웠고, 대화를 나누면서 많은 위로를 받았다. 힘든 일이 있었지만 친구 덕분에 기분이 많이 좋아졌다."
}

### 일기 감정 분석 (실제 - Claude API 사용)
POST http://localhost:8080/api/v1/diaries/1/analyze
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### 일기 감정 분석 (테스트 모드 - 랜덤 생성)
POST http://localhost:8080/api/v1/diaries/1/analyze-test
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### 일기 상세 조회
GET http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}

### 특정 날짜 일기 조회
GET http://localhost:8080/api/v1/diaries/date/2025-12-09
Authorization: Bearer {{accessToken}}

### 월별 일기 목록 조회 (꽃 상세정보 포함)
GET http://localhost:8080/api/v1/diaries?yearMonth=2025-12
Authorization: Bearer {{accessToken}}

### 일기 수정
# TODO 수정되면 기존 분석 내용 날려야할듯
PUT http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "오늘 친구와 맛있는 저녁을 먹었다. 정말 행복한 하루였다. (수정됨)"
}

### 일기 삭제 (Soft Delete)
# TODO response가 없다? 원래 RESTful은 그런것인가?
DELETE http://localhost:8080/api/v1/diaries/60
Authorization: Bearer {{accessToken}}


### ========================================
### 꽃 정보 API (Flower)
### ========================================

### 사용자의 감정&꽃 통계 조회 (날짜 목록 + 꽃 상세정보 포함)
GET http://localhost:8080/api/v1/flowers/my-emotions
Authorization: Bearer {{accessToken}}

### 전체 감정-꽃 정보 조회 (display_order 순)
GET http://localhost:8080/api/v1/flowers/all-emotions
Authorization: Bearer {{accessToken}}